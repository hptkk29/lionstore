<template>
    <div class="main-mobile-header">
        <v-app-bar :height="75" :color="$vuetify.theme.dark ? '#2c2c2c' : 'white'" flat class="large-header">


            <!-- Logo -->
            <nuxt-link to="/" class="mobile-logo">
                <img :src="logo" :alt="$store.state.settings.site_title" />
            </nuxt-link>

            <v-spacer />

            <!-- Main apps -->
            <v-btn icon class="mobile-header-btn" :class="$vuetify.rtl ? 'mr-1' : 'ml-1'" @click="openSidebar()">
                <span class="svg-icon svg-icon-primary svg-icon-2x"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect x="0" y="0" width="24" height="24"/> <rect fill="#000000" x="4" y="4" width="7" height="7" rx="1.5"/> <path d="M5.5,13 L9.5,13 C10.3284271,13 11,13.6715729 11,14.5 L11,18.5 C11,19.3284271 10.3284271,20 9.5,20 L5.5,20 C4.67157288,20 4,19.3284271 4,18.5 L4,14.5 C4,13.6715729 4.67157288,13 5.5,13 Z M14.5,4 L18.5,4 C19.3284271,4 20,4.67157288 20,5.5 L20,9.5 C20,10.3284271 19.3284271,11 18.5,11 L14.5,11 C13.6715729,11 13,10.3284271 13,9.5 L13,5.5 C13,4.67157288 13.6715729,4 14.5,4 Z M14.5,13 L18.5,13 C19.3284271,13 20,13.6715729 20,14.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 L14.5,20 C13.6715729,20 13,19.3284271 13,18.5 L13,14.5 C13,13.6715729 13.6715729,13 14.5,13 Z" fill="#000000" opacity="0.3"/> </g> </svg></span>
            </v-btn>

            <!-- Search -->
            <v-btn icon class="mobile-header-btn" :class="$vuetify.rtl ? 'mr-1' : 'ml-1'" @click="openSearch()">
                <span class="svg-icon svg-icon-primary svg-icon-2x"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect x="0" y="0" width="24" height="24"/> <path d="M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/> <path d="M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z" fill="#000000" fill-rule="nonzero"/> </g> </svg></span>
            </v-btn>

            <!-- Cart -->
            <v-badge :content="Number($store.state.cart.itemsInCart.length)" :value="Number($store.state.cart.itemsInCart.length)" color="indigo accent-3" offset-x="15" offset-y="20" overlap>
                <v-btn icon class="mobile-header-btn" :class="$vuetify.rtl ? 'mr-1' : 'ml-1'" @click="openBasket()">
                    <span class="svg-icon svg-icon-primary svg-icon-2x"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1"> <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <rect x="0" y="0" width="24" height="24"/> <path d="M14,9 L14,8 C14,6.8954305 13.1045695,6 12,6 C10.8954305,6 10,6.8954305 10,8 L10,9 L8,9 L8,8 C8,5.790861 9.790861,4 12,4 C14.209139,4 16,5.790861 16,8 L16,9 L14,9 Z M14,9 L14,8 C14,6.8954305 13.1045695,6 12,6 C10.8954305,6 10,6.8954305 10,8 L10,9 L8,9 L8,8 C8,5.790861 9.790861,4 12,4 C14.209139,4 16,5.790861 16,8 L16,9 L14,9 Z" fill="#000000" fill-rule="nonzero" opacity="0.3"/> <path d="M6.84712709,9 L17.1528729,9 C17.6417121,9 18.0589022,9.35341304 18.1392668,9.83560101 L19.611867,18.671202 C19.7934571,19.7607427 19.0574178,20.7911977 17.9678771,20.9727878 C17.8592143,20.9908983 17.7492409,21 17.6390792,21 L6.36092084,21 C5.25635134,21 4.36092084,20.1045695 4.36092084,19 C4.36092084,18.8898383 4.37002252,18.7798649 4.388133,18.671202 L5.86073316,9.83560101 C5.94109783,9.35341304 6.35828794,9 6.84712709,9 Z" fill="#000000"/> </g> </svg></span>
                </v-btn>
            </v-badge>

        </v-app-bar>
    </div>
</template>

<script>
    export default {

        name: 'main-header',

        components: {
			account: () => import('~/components/main/partials/account')
		},

        computed: {

            // Get site logo
            logo() {

                // Set logo 
                const logo = this.$store.state.settings.mobile_logo

                // Check if site has a desktop logo
                if (logo) {

                    return this.$clientIndex(`uploads/${ logo.file_folder }/${ logo.uid }.webp`)
                    
                } else {

                    // Return default logo
                    return this.$clientIndex('images/default/logo.svg')

                }

            }

        },

        methods: {

            // Open Basket
            openBasket() {

                this.$nuxt.$emit('open_shopping_cart')

            },

            // Open mobile sidebar
            openSidebar() {
                this.$nuxt.$emit('open::mobile::sidebar')
            },

            // Open search dialog
            openSearch() {
                this.$nuxt.$emit('open::mobile::search')
            }

        }

    }
</script>